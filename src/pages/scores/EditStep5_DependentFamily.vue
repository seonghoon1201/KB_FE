<!-- src/pages/score/Step5.vue -->
<template>
    <ScoreStepWrapper>
        <!-- ë‹¨ê³„ í‘œì‹œ -->
        <div class="flex justify-start pb-4">
            <span class="text-lg text-gray-500">5/6</span>
        </div>
        <!-- í—¤ë“œë¼ì¸ -->
        <div class="px-4 pb-4">
            <h2 class="text-xl font-bold">ë¶€ì–‘ê°€ì¡±ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h2>
            <p class="text-sm text-gray-500 mt-1">
                ì²­ì•½ ì ìˆ˜ ê³„ì‚°ì— ê°€ì¥ ì¤‘ìš”í•œ ì •ë³´ì˜ˆìš”. ë¶€ì–‘ê°€ì¡± ì„¤ëª…ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”
            </p>
        </div>

        <ul class="divide-y divide-gray-200">
            <!-- ë°°ìš°ì -->
            <li class="flex justify-between items-center py-4 px-4">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <span class="font-medium">ë°°ìš°ì</span>
                        <InfoTooltip title="ë°°ìš°ì ë¶€ì–‘ê°€ì¡± ê¸°ì¤€">
                            <ul class="list-disc list-inside text-base text-gray-600 space-y-2">
                                <li>
                                    ë°°ìš°ìê°€ ë‚˜ì™€ ì„¸ëŒ€ê°€ ë¶„ë¦¬ë˜ì–´ ìˆì–´ë„ ë¬´ì£¼íƒ ìƒíƒœë¼ë©´ ë¶€ì–‘ê°€ì¡±ì—
                                    í¬í•¨ë¼ìš”
                                </li>
                                <li>
                                    ë¶€ì–‘ê°€ì¡±ì¸ ë°°ìš°ì(ë³¸ì¸ í¬í•¨)ê°€ 2ì£¼íƒ ì´ìƒì„ ì†Œìœ í•œ ê²½ìš°, ì†Œìœ 
                                    ì£¼íƒ ìˆ˜ë§ˆë‹¤ 5ì ì”© ê°ì ë¼ìš”<br />
                                    ex) 2ì£¼íƒ ì†Œìœ : 10ì  ê°ì 
                                </li>
                            </ul>
                        </InfoTooltip>
                    </div>
                    <span class="text-sm text-gray-500 mt-1">ë¬´ì£¼íƒ</span>
                </div>
                <div class="flex items-center gap-2">
                    <button
                        @click="spouse = 1"
                        :class="[
                            'w-10 h-8 rounded-full border font-medium',
                            spouse === 1
                                ? 'bg-blue-500 text-white border-blue-500'
                                : 'bg-gray-100 text-gray-700 border-gray-200',
                        ]"
                    >
                        O
                    </button>
                    <button
                        @click="spouse = 0"
                        :class="[
                            'w-10 h-8 rounded-full border font-medium',
                            spouse === 0
                                ? 'bg-blue-500 text-white border-blue-500'
                                : 'bg-gray-100 text-gray-700 border-gray-200',
                        ]"
                    >
                        X
                    </button>
                </div>
            </li>

            <!-- ë¬´ì£¼íƒ ë¶€ëª¨ -->
            <li class="flex justify-between items-center py-4 px-4">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <span class="font-medium">ë¬´ì£¼íƒ ë¶€ëª¨ (ë°°ìš°ì ë¶€ëª¨ í¬í•¨)</span>
                        <InfoTooltip title="ë¶€ëª¨ ë¶€ì–‘ê°€ì¡± ê¸°ì¤€">
                            <ul class="list-disc list-inside text-base text-gray-600 space-y-2">
                                <li>
                                    ë³¸ì¸ / ë°°ìš°ìì˜ ë¶€ëª¨ë‹˜ ëª¨ë‘ ë¬´ì£¼íƒì´ì–´ì•¼ í•´ìš”. ë˜í•œ
                                    ì£¼ë¯¼ë“±ë¡ë“±ë³¸ì— ìµœê·¼ 3ë…„ ì´ìƒ ë“±ì¬ë˜ì–´ ìˆì–´ì•¼ ì¸ì •ë¼ìš”. ë¶€ëª¨ë‹˜ì´
                                    ë§Œ 60ì„¸ ì´ìƒì´ì‹œë¼ë©´ ì£¼íƒì„ ì†Œìœ í•˜ì…”ë„ ë¶€ì–‘ê°€ì¡±ìœ¼ë¡œ ì¸ì •ë¼ìš”
                                </li>
                                <li>
                                    ë§Œ 60ì„¸ ì´ìƒ ë¶€ëª¨ê°€ 2ì£¼íƒ ì´ìƒì„ ì†Œìœ í•˜ì‹  ê²½ìš°, 1ì£¼íƒ ì´ˆê³¼
                                    ì£¼íƒë§ˆë‹¤ 5ì ì”© ê°ì ë¼ìš”<br />
                                    ex) 2ì£¼íƒ ì†Œìœ : 5ì  ê°ì 
                                </li>
                            </ul>
                        </InfoTooltip>
                    </div>
                    <span class="text-sm text-gray-500 mt-1">ë§Œ 60ì„¸ ì´ìƒì´ë©´ ìœ ì£¼íƒë„ ê°€ëŠ¥</span>
                </div>
                <DependentCounter v-model="parents" />
            </li>

            <!-- ìë…€ -->
            <li class="flex justify-between items-center py-4 px-4">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <span class="font-medium">ìë…€</span>
                        <InfoTooltip title="ìë…€ ë¶€ì–‘ê°€ì¡± ê¸°ì¤€">
                            <ul class="list-disc list-inside text-base text-gray-600 space-y-2">
                                <li>
                                    ë§Œ 30ì„¸ ë¯¸ë§Œì˜ ë¯¸í˜¼ ìë…€ëŠ” ë¶€ì–‘ê°€ì¡±ìœ¼ë¡œ ì¸ì •ë¼ìš”. ë§Œ 30ì„¸ ì´ìƒì˜
                                    ë¯¸í˜¼ ìë…€ëŠ” ì£¼ë¯¼ë“±ë¡ë“±ë³¸ì— ìµœê·¼ 1ë…„ ì´ìƒ ë“±ì¬ë˜ì–´ ìˆì–´ì•¼
                                    ì¸ì •ë¼ìš”
                                </li>
                                <li>
                                    ë¶€ì–‘ê°€ì¡±ì¸ ìë…€ê°€ 2ì£¼íƒ ì´ìƒì„ ì†Œìœ í•œ ê²½ìš°, ì†Œìœ  ì£¼íƒ ìˆ˜ë§ˆë‹¤
                                    5ì ì”© ê°ì ë¼ìš”<br />
                                    ex) 2ì£¼íƒ ì†Œìœ : 10ì  ê°ì 
                                </li>
                            </ul>
                        </InfoTooltip>
                    </div>
                    <span class="text-sm text-gray-500 mt-1">ë¬´ì£¼íƒ / ë¯¸í˜¼ì</span>
                </div>
                <DependentCounter v-model="children" />
            </li>
        </ul>

        <PrimaryButton class="mt-8" @click="next">ë‹¤ìŒ</PrimaryButton>
    </ScoreStepWrapper>
</template>

<script setup>
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import { useScoreStore } from '@/stores/scoreStore'
import ScoreStepWrapper from '@/components/score/ScoreStepWrapper.vue'
import InfoTooltip from '@/components/score/InfoTooltip.vue'
import PrimaryButton from '@/components/common/PrimaryButton.vue'
import DependentCounter from '@/components/score/DependentCounter.vue'

const router = useRouter()
const scoreStore = useScoreStore()

// ë¡œì»¬ ìƒíƒœ
const spouse = ref(0) // ë°°ìš°ì: 1 or 0
const parents = ref(0) // ë¶€ëª¨ ìˆ˜
const children = ref(0) // ìë…€ ìˆ˜

async function next() {
    const total = spouse.value + parents.value + children.value
    console.log('ğŸ‘ª ë¶€ì–‘ê°€ì¡± ìˆ˜ í•©ì‚°:', {
        spouse: spouse.value,
        parents: parents.value,
        children: children.value,
        total,
    })

    scoreStore.dependentsNm = total
    scoreStore.saveToLocal()
    console.log('ğŸ’¾ ì €ì¥ëœ dependentsNm:', scoreStore.dependentsNm)

    await scoreStore.calculateScore()
    router.push('/score/info')
}
</script>
